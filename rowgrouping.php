<?php$data = [  0 => [    "mf_name" => "Electrical",    "ct_name" => "Terminals",    "sc_name" => "Outlets &amp; Sockets",    "total_product" => 127,  ],  1 => [    "mf_name" => "Electrical",    "ct_name" => "Lighting",    "sc_name" => "Lighting",    "total_product" => 503,  ],  2 => [    "mf_name" => "Electrical",    "ct_name" => "Terminals",    "sc_name" => "Fitting",    "total_product" => 14  ],  3 => [    "mf_name" => "Electrical",    "ct_name" => "Security Systems",    "sc_name" => "Devices",    "total_product" => 52  ],  4 => [    "mf_name" => "Electrical",    "ct_name" => "Equipment",    "sc_name" => "Power",    "total_product" => 35  ],  5 => [    "mf_name" => "Electrical",    "ct_name" => "Equipment",    "sc_name" => "Duct Fitting",    "total_product" => 13  ],  6 => [    "mf_name" => "Electrical",    "ct_name" => "Equipment",    "sc_name" => "Electrical Fixtures",    "total_product" => 138  ],  7 => [    "mf_name" => "Electrical",    "ct_name" => "Speaker",    "sc_name" => "Speaker",    "total_product" => 12  ],  8 => [    "mf_name" => "Electrical",    "ct_name" => "Amplifier",    "sc_name" => "Amplifier",    "total_product" => 6  ],  9 => [    "mf_name" => "Electrical",    "ct_name" => "Microphone",    "sc_name" => "Microphone",    "total_product" => 5  ],  10 => [    "mf_name" => "Electrical",    "ct_name" => "Antenna",    "sc_name" => "Antenna",    "total_product" => 4  ],  11 => [    "mf_name" => "Electrical",    "ct_name" => "Motorized Curtain",    "sc_name" => "Motorized Curtain",    "total_product" => 3  ],  12 => [    "mf_name" => "Electrical",    "ct_name" => "Fan",    "sc_name" => "Fan",    "total_product" => 3  ],    13 => [    "mf_name" => "Electrical2",    "ct_name" => "Fan2",    "sc_name" => "Fan",    "total_product" => 3  ],    14 => [    "mf_name" => "Electrical2",    "ct_name" => "Fan2",    "sc_name" => "Fan",    "total_product" => 3  ],    15 => [    "mf_name" => "Electrical2",    "ct_name" => "Fan2",    "sc_name" => "Fan",    "total_product" => 3  ] ];    // function get_data_test($data){	  // $object = (object) $data;	  // foreach ($object as $key => $value) {		// $object->{$key} = $value;		// echo $key;		// echo "<br/>";		// $t = (object) $value;		// foreach ($t as $key2 => $value2) {			// if($key2=="mf_name" && $value2=="Electrical"){							// }			// else{			// }		// }		// echo "<br/>";	  // }  // }   function get_data($data,$choose,$rowgroup=null)  {    $html ='';		$group = rows_group($data,$rowgroup);	//echo $group['mf_name'][7]['value'];	foreach($data as $key => $row)	{	 $html.='<tr>';	 foreach($choose as $ch){	  if(!in_array($ch,$rowgroup))	      $html.='<td>'.$row[$ch].'</td>';     else		if(isset($group[$ch][$key]['value']))       $html.='<td rowspan='.$group[$ch][$key]['rowspan'].'>'.$group[$ch][$key]['value'].'</td>';		 	 }	 $html.='</tr>';	 	}	return $html;	  }    function rows_group($data,$rowgroup)  {   $celm =[];   $skipthis=[];   foreach($rowgroup as $key)   {       	   for ($x = 0; $x <= count($data)-1; $x++) 	   {		    $total = count_duplicate($data,$key,$x);		    //$skipthis = $total[$key][$x]['include'];	      if(!in_array($x,$skipthis))			{ 							 //if($total[$key][$x]['rowspan'] >1){					  $celm[$key][$x]=$total[$key][$x];					  $skipthis = $total[$key][$x]['include'];				 //}			}	   }    }     echo "<pre>";    print_r($celm);	return $celm;  }      function count_duplicate($data,$rowgroup,$begin=0,$stop='')  {    $celm=[];	$end=(empty($stop)) ? count($data)-1 : $stop;	$laststring='';	$keycheck='';	$start=$begin;	$increment =0;		 while($start <= $end) {			 if(!empty($laststring) && ($data[$start][$keycheck] != $laststring))			 {				 break;			 }	  $laststring = $data[$start][$rowgroup];				   		$keycheck = $rowgroup;       	       $increment++;		  $start++;		$celm[$keycheck][$begin]['include'][]=$start-1;		$celm[$keycheck][$begin]['value']=$laststring;       					 }       $celm[$keycheck][$begin]['rowspan']=($increment==1) ? false : $increment;        array_shift($celm[$keycheck][$begin]['include']);   		return $celm;  }//print_r($data);?><html><head></head><title>test</title><body><table border=1><tr><th>kumpulan</th><th>kategori</th><th>sub</th><th>Total</th></tr><?=get_data($data,['mf_name','ct_name','sc_name','total_product'],['mf_name','ct_name','sc_name']);?><?php//get_data_test($data);?></table></body></html>